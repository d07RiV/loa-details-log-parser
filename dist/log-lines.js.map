{"version":3,"file":"log-lines.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0, radix = 10, float = false) {\n  if (typeof intString === \"number\") {\n    if (isNaN(intString)) return defaultValue;\n    return intString;\n  }\n\n  let intNum: number;\n\n  try {\n    intNum = float ? parseFloat(intString) : parseInt(intString, radix);\n    if (isNaN(intNum)) intNum = defaultValue;\n  } catch {\n    intNum = defaultValue;\n  }\n\n  return intNum;\n}\n","import { tryParseInt } from \"./util\";\n\nclass LogLine {\n  lineSplit: string[];\n  timestamp: Date;\n\n  constructor(lineSplit: string[]) {\n    this.lineSplit = lineSplit;\n    this.timestamp = new Date(this.lineSplit[1]);\n  }\n}\n\n// logId = 0\nexport class LogMessage extends LogLine {\n  message: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.message = this.lineSplit[2];\n  }\n}\n\n// logId = 1\nexport class LogInitEnv extends LogLine {\n  playerId: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.playerId = lineSplit[2];\n  }\n}\n\n// logId = 2\nexport class LogPhaseTransition extends LogLine {\n  phaseCode: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.phaseCode = tryParseInt(lineSplit[2]);\n  }\n}\n\n// logId = 3\nexport class LogNewPc extends LogLine {\n  id: string;\n  name: string;\n  classId: number;\n  class: string;\n  gearScore: number;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.classId = tryParseInt(lineSplit[4]);\n    this.class = lineSplit[5] || \"UnknownClass\";\n    /* this.level = tryParseInt(lineSplit[6]); */\n    this.gearScore = tryParseInt(lineSplit[7], 0, 10, true);\n    this.currentHp = tryParseInt(lineSplit[8]);\n    this.maxHp = tryParseInt(lineSplit[9]);\n  }\n}\n\n// logId = 4\nexport class LogNewNpc extends LogLine {\n  id: string;\n  npcId: number;\n  name: string;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.npcId = tryParseInt(lineSplit[3]);\n    this.name = lineSplit[4] || \"Unknown Entity\";\n    this.currentHp = tryParseInt(lineSplit[5]);\n    this.maxHp = tryParseInt(lineSplit[6]);\n  }\n}\n\n// logId = 5\nexport class LogDeath extends LogLine {\n  id: string;\n  name: string;\n  killerId: string;\n  killerName: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.killerId = lineSplit[4];\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\n  }\n}\n\n// logId = 6\nexport class LogSkillStart extends LogLine {\n  id: string;\n  name: string;\n  skillId: number;\n  skillName: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = tryParseInt(lineSplit[4]);\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n  }\n}\n\n// logId = 7\nexport class LogSkillStage extends LogLine {\n  id: string;\n  name: string;\n  skillId: string;\n  skillName: string;\n  skillStage: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = lineSplit[4];\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n    this.skillStage = tryParseInt(lineSplit[6]);\n  }\n}\n\n// logId = 8\nexport class LogDamage extends LogLine {\n  id: string;\n  name: string;\n  skillId: number;\n  skillName: string;\n  skillEffectId: number;\n  skillEffect: string;\n  targetId: string;\n  targetName: string;\n  damage: number;\n  damageModifier: number;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = tryParseInt(lineSplit[4]);\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n    this.skillEffectId = tryParseInt(lineSplit[6]);\n    this.skillEffect = lineSplit[7];\n    this.targetId = lineSplit[8];\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\n    this.damage = tryParseInt(lineSplit[10]);\n    this.damageModifier = tryParseInt(lineSplit[11], 0, 16);\n    this.currentHp = tryParseInt(lineSplit[12]);\n    this.maxHp = tryParseInt(lineSplit[13]);\n  }\n}\n\n// logId = 9\nexport class LogHeal extends LogLine {\n  id: string;\n  name: string;\n  healAmount: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.healAmount = tryParseInt(lineSplit[4]);\n    //this.currentHp = tryParseInt(lineSplit[5]);\n  }\n}\n\n// logId = 10\nexport class LogBuff extends LogLine {\n  id: string;\n  name: string;\n  buffId: string;\n  buffName: string;\n  isNew: boolean;\n  sourceId: string;\n  sourceName: string;\n  shieldAmount: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.buffId = lineSplit[4];\n    this.buffName = lineSplit[5];\n    this.isNew = lineSplit[6] == \"1\";\n    this.sourceId = lineSplit[7];\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\n    this.shieldAmount = tryParseInt(lineSplit[9]);\n  }\n}\n\n// logId = 11\nexport class LogCounterattack extends LogLine {\n  id: string;\n  name: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    /* this.targetId = lineSplit[4];\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\n  }\n}\n"],"names":["tryParseInt","intString","defaultValue","radix","float","isNaN","intNum","parseFloat","parseInt","lineSplit","this","timestamp","LogMessage","_LogLine","_this","call","message","_inheritsLoose","LogLine","LogInitEnv","_LogLine2","_this2","playerId","LogPhaseTransition","_LogLine3","_this3","phaseCode","_LogLine4","LogNewPc","_this4","id","name","classId","gearScore","currentHp","maxHp","LogNewNpc","_LogLine5","_this5","npcId","LogDeath","_LogLine6","_this6","killerId","killerName","LogSkillStart","_LogLine7","_this7","skillId","skillName","LogSkillStage","_LogLine8","_this8","skillStage","LogDamage","_LogLine9","_this9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","LogHeal","_LogLine10","_this10","healAmount","LogBuff","_this11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","LogCounterattack","_LogLine12","_this12"],"mappings":"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"}