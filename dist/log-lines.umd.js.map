{"version":3,"file":"log-lines.umd.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0, radix = 10) {\n  if (typeof intString === \"number\") {\n    if (isNaN(intString)) return defaultValue;\n    return intString;\n  }\n\n  let intNum: number;\n\n  try {\n    intNum = parseInt(intString, radix);\n    if (isNaN(intNum)) intNum = defaultValue;\n  } catch {\n    intNum = defaultValue;\n  }\n\n  return intNum;\n}\n","import { tryParseInt } from \"./util.js\";\n\nclass LogLine {\n  lineSplit: string[];\n  timestamp: Date;\n\n  constructor(lineSplit: string[]) {\n    this.lineSplit = lineSplit;\n    this.timestamp = new Date(this.lineSplit[1]);\n  }\n}\n\n// logId = 0\nexport class LogMessage extends LogLine {\n  message: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.message = this.lineSplit[2];\n  }\n}\n\n// logId = 1\nexport class LogInitEnv extends LogLine {\n  playerId: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.playerId = lineSplit[2];\n  }\n}\n\n// logId = 2\nexport class LogPhaseTransition extends LogLine {\n  phaseCode: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.phaseCode = tryParseInt(lineSplit[2]);\n  }\n}\n\n// logId = 3\nexport class LogNewPc extends LogLine {\n  id: string;\n  name: string;\n  classId: number;\n  class: string;\n  gearScore: string;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.classId = tryParseInt(lineSplit[4]);\n    this.class = lineSplit[5] || \"UnknownClass\";\n    /* this.level = tryParseInt(lineSplit[6]); */\n    this.gearScore = lineSplit[7];\n    this.currentHp = tryParseInt(lineSplit[8]);\n    this.maxHp = tryParseInt(lineSplit[9]);\n  }\n}\n\n// logId = 4\nexport class LogNewNpc extends LogLine {\n  id: string;\n  name: string;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    //this.npcId = tryParseInt(lineSplit[3]);\n    this.name = lineSplit[4] || \"Unknown Entity\";\n    this.currentHp = tryParseInt(lineSplit[5]);\n    this.maxHp = tryParseInt(lineSplit[6]);\n  }\n}\n\n// logId = 5\nexport class LogDeath extends LogLine {\n  id: string;\n  name: string;\n  killerId: string;\n  killerName: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.killerId = lineSplit[4];\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\n  }\n}\n\n// logId = 6\nexport class LogSkillStart extends LogLine {\n  id: string;\n  name: string;\n  skillId: string;\n  skillName: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = lineSplit[4];\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n  }\n}\n\n// logId = 7\nexport class LogSkillStage extends LogLine {\n  id: string;\n  name: string;\n  skillId: string;\n  skillName: string;\n  skillStage: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = lineSplit[4];\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n    this.skillStage = tryParseInt(lineSplit[6]);\n  }\n}\n\n// logId = 8\nexport class LogDamage extends LogLine {\n  id: string;\n  name: string;\n  skillId: number;\n  skillName: string;\n  skillEffectId: number;\n  skillEffect: string;\n  targetId: string;\n  targetName: string;\n  damage: number;\n  damageModifier: number;\n  currentHp: number;\n  maxHp: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.skillId = tryParseInt(lineSplit[4]);\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\n    this.skillEffectId = tryParseInt(lineSplit[6]);\n    this.skillEffect = lineSplit[7];\n    this.targetId = lineSplit[8];\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\n    this.damage = tryParseInt(lineSplit[10]);\n    this.damageModifier = tryParseInt(lineSplit[11], 0, 16);\n    this.currentHp = tryParseInt(lineSplit[12]);\n    this.maxHp = tryParseInt(lineSplit[13]);\n  }\n}\n\n// logId = 9\nexport class LogHeal extends LogLine {\n  id: string;\n  name: string;\n  healAmount: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.healAmount = tryParseInt(lineSplit[4]);\n    //this.currentHp = tryParseInt(lineSplit[5]);\n  }\n}\n\n// logId = 10\nexport class LogBuff extends LogLine {\n  id: string;\n  name: string;\n  buffId: string;\n  buffName: string;\n  isNew: boolean;\n  sourceId: string;\n  sourceName: string;\n  shieldAmount: number;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    this.buffId = lineSplit[4];\n    this.buffName = lineSplit[5];\n    this.isNew = lineSplit[6] == \"1\";\n    this.sourceId = lineSplit[7];\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\n    this.shieldAmount = tryParseInt(lineSplit[9]);\n  }\n}\n\n// logId = 11\nexport class LogCounterattack extends LogLine {\n  id: string;\n  name: string;\n\n  constructor(lineSplit: string[]) {\n    super(lineSplit);\n\n    this.id = lineSplit[2];\n    this.name = lineSplit[3] || \"Unknown Entity\";\n    /* this.targetId = lineSplit[4];\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\n  }\n}\n"],"names":["tryParseInt","intString","defaultValue","radix","isNaN","intNum","parseInt","_unused","lineSplit","this","timestamp","Date","LogMessage","_this","_LogLine","call","message","LogLine","_LogLine2","LogInitEnv","_this2","playerId","_inheritsLoose","_LogLine3","LogPhaseTransition","_this3","phaseCode","_LogLine4","LogNewPc","_this4","id","name","classId","gearScore","currentHp","maxHp","LogNewNpc","_LogLine5","_this5","LogDeath","_LogLine6","_this6","killerId","killerName","LogSkillStart","_this7","_LogLine7","skillId","skillName","LogSkillStage","_LogLine8","_this8","skillStage","_LogLine9","LogDamage","_this9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","LogHeal","_this10","_LogLine10","healAmount","LogBuff","_LogLine11","_this11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","LogCounterattack","_this12","_LogLine12"],"mappings":"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"}